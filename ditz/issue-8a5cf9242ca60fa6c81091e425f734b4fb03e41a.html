<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>index speedup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<div class="main">

<h1>index speedup</h1>
<div class="backptr"><a href="index.html">&laquo; sup project page</a></div>


  <div class="description">
  <p>I've just merged in a changeset that makes Sup store message body
content in the Ferret index. (They've always been indexed, but now
they're stored as well.) This means that changing the labels on a
message can be a copy operation of the previous Ferret document, rather
than requiring downloading and parsing the original message to create a
new Ferret document.
So, this should have two effects:</p><p>1. The Ferret index size will expand by about 50%. Sorry.
2. Tweaking message labels should be much, much faster, since the
message no longer has to be downloaded from the source in order to
change the labels. If you've ever tried to label a large IMAP thread,
you no longer have to wait 5 minutes just to save. :)</p><p>The index size increase is unfortunate, but it's something that has to
happen anyways if we want search-results-mode to have matching text in
the snippets, which is in the future TODO.</p><p>The change was made in such a way that it's incrementally applied
whenever a message is saved or changed in the Ferret index. So, if you
want the above behavior on all messages immediately, you must do
sup-sync --all on a source (which will require downloading each
message). Otherwise, you will get the slow behavior (message body needs
to be downloaded from the source) the first time you save a message
after merging this change, and the fast behavior (no downloading
required) on all subsequent times.
</p>
  </div>


<h2>Details</h2>
<table>
  <tr>
    <td class="attrname">Id:</td>
    <td class="attrval"><span class="id">8a5cf9242ca60fa6c81091e425f734b4fb03e41a</span></td>
  </tr>

  <tr>
    <td class="attrname">Type:</td>
    <td class="attrval">feature</td>
  </tr>

  <tr>
    <td class="attrname">Creation time:</td>
    <td class="attrval">2008-03-07 02:48 GMT</td>
  </tr>

  <tr>
    <td class="attrname">Creator:</td>
    <td class="attrval"><span class="person">William Morgan &lt;wmorgan-sup@...&gt;</span></td>
  </tr>

  

  <tr>
    <td class="attrname">Release:</td>
    <td class="attrval">
      
        <a href="release-0.5.html">0.5</a>
        
          (released 2008-04-22)
        
      
    </td>
  </tr>

  <tr>
    <td class="attrname">Component:</td>
    <td class="attrval"><a href="component-indexing.html">indexing</a></td>
  </tr>

  <tr>
    <td class="attrname">Status:</td>
    <td class="attrval"> 
      closed: fixed
      <img title="fixed" alt="fixed" class="inline-status-image" src="green-check.png"/>
    </td>
  </tr>

  

</table>



<h2>Issue log</h2>

<table class="log">

  <tr class="even-row">
    <td class="date">2008-04-20 22:10 GMT</td>
    <td class="person">William Morgan &lt;wmorgan-sup@...&gt;</td>
    <td class="message">closed issue with disposition fixed</td>
  </tr>
  
  <tr><td></td></tr>

  <tr class="odd-row">
    <td class="date">2008-03-07 02:48 GMT</td>
    <td class="person">William Morgan &lt;wmorgan-sup@...&gt;</td>
    <td class="message">changed status from unstarted to in_progress</td>
  </tr>
  
  <tr><td></td></tr>

  <tr class="even-row">
    <td class="date">2008-03-07 02:48 GMT</td>
    <td class="person">William Morgan &lt;wmorgan-sup@...&gt;</td>
    <td class="message">created</td>
  </tr>
  
  <tr><td></td></tr>

</table>

</div>
<div class="footer">Generated by <a href="http://ditz.rubyforge.org/">ditz</a>.</div>

</body>
</html>
